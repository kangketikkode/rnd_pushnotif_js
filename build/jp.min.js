console.log(">> JP Notif start working");const check=()=>{if(!("serviceWorker"in navigator))throw new Error("No Service Worker support");if(!("PushManager"in window))throw new Error("No Push API support")},registerServiceWorker=async()=>{return await navigator.serviceWorker.register("jp_notif_service.js")},requestNotificationPermission=async()=>{if("granted"!==await window.Notification.requestPermission())throw new Error("Notification pemission not granted")},mainJP=async()=>{check();await registerServiceWorker(),await requestNotificationPermission()},urlB64ToUint8Array=(console.log(">> JP Notif Service start working"),e=>{e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const t=atob(e),o=new Uint8Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return o}),saveSubscription=async e=>{const t=await fetch("http://139.99.73.252:4000/save-subscription",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.json()},showLocalNotification=(self.addEventListener("activate",async()=>{try{var e={applicationServerKey:urlB64ToUint8Array("BOdxIqq2MuZTW0lPWOz5SHcgNBJFC5aZP7jFeBcXl3sksX52a3MTDXdy-Du7yZ3vvy7OVxfAO_Wud0MQXmf6F4s"),userVisibleOnly:!0},t=await self.registration.pushManager.subscribe(e),o=(console.log(">> Service worker activated"),await saveSubscription(t));console.log(o)}catch(e){console.log("ERROR",e)}}),self.addEventListener("push",function(e){e.data?(console.log(">> Push event:: ",e.data.text()),showLocalNotification("JP789",e.data.text(),self.registration)):console.log(">> Push event but no data")}),(e,t,o)=>{o.showNotification(e,{body:t})});